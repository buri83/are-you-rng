(()=>{"use strict";var e={788:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomInt=void 0,t.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}},561:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.gameStart=t.timeout=t.sending=t.generated=t.enter=t.typeWriter=void 0;class n{constructor(e,t){this.audio=new Audio(e),this.audio.volume=t}playAsSE(){this.audio.currentTime=0,this.audio.play()}}t.typeWriter=new n("./static/typewriter.mp3",.4),t.enter=new n("./static/enter.mp3",1),t.generated=new n("./static/generated.mp3",.5),t.sending=new n("./static/sending.mp3",1),t.timeout=new n("./static/error.mp3",1),t.gameStart=new n("./static/gameStart.mp3",1)},677:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.modChar=t.isValidChar=t.ValidChar=void 0,t.ValidChar=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.isValidChar=function(e){return t.ValidChar.some((t=>t===e))},t.modChar=function(e,n){const a=t.ValidChar.findIndex((t=>t===e))%n;return t.ValidChar[a]}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}(()=>{const e=n(677),t=n(788),a=n(561),o=e=>new Promise((t=>setTimeout(t,e))),r=new class{constructor(){this.keys=[]}push(e){this.keys.push(e)}take(){const e=this.keys[0];return this.keys=this.keys.slice(1),e}clear(){this.keys=[]}};async function i(...e){for(var t;;){await o(1);const n=null===(t=r.take())||void 0===t?void 0:t.toLowerCase();if(n&&(!e||e.includes(n)))return n}}window.addEventListener("keydown",(e=>{r.push(e.key)})),async function(){await async function(){const e=document.getElementById("instruction"),n=document.getElementById("caption"),r=document.getElementById("prologueScreen");r.style.display="block",e.textContent="> はい（Enter）";const s=["あなたは乱数生成器ですか？",`そうですよね、あなたは立派な乱数生成器です。<br><br>もう少しすると、PID=${(0,t.getRandomInt)(1,65536)} のプログラムさんから乱数の生成を頼まれそうです、手伝ってもらえますか？`,"ありがとうございます！<br><br>では、これから制限時間以内にランダムな文字列を生成してくださいね。<br><br>いい感じの乱数列を期待してますよ！！！"];for(const e of s)n.innerHTML=e,await i("enter"),a.enter.playAsSE();n.innerHTML="<br><br><br>もうそろそろ、リクエストが来そうです...";for(let t=0;t<31;t++){const n=(new Date).getTime(),a=3-t/10;e.textContent=`残り ${a.toFixed(1)} 秒`,await o(100-((new Date).getTime()-n))}a.gameStart.playAsSE(),n.textContent="",e.textContent="",r.style.display="none"}();const n=await async function(){const t=document.getElementById("mainScreen"),n=document.getElementById("generatedTexts"),s=document.getElementById("currentGeneratingText"),d=document.getElementById("gameTimerBar"),l=(new Date).getTime();let c=!1,u=!1;(async()=>{const e=document.getElementById("timeIsOver");for(;;){const e=100-Math.max(0,(new Date).getTime()-l)/2e4*100;if(d.style.width=`${e.toFixed(2)}%`,e<=60&&(d.style.backgroundColor="orange"),e<=20&&(d.style.backgroundColor="red"),e<=0)break;await o(10)}c||(t.style.display="none",e.style.display="block",u=!0,a.timeout.playAsSE())})(),r.clear(),t.style.display="block";const m=[];for(let t=0;t<5;t++){const t=[];for(;t.length<40;){const n=await i(...e.ValidChar);if(u)throw new Error("ERROR: Timed out !! Response from random number generator is too slow.");a.typeWriter.playAsSE(),t.push(n),s.innerHTML=`<tt>${t.join("")}</tt>`}s.textContent="",m.push(t),n.innerHTML="",m.map((e=>{n.innerHTML+=`\n            <div class="generatedText">\n                <span class="generatedTextMark">\n                ✅ \n                </span>\n                <tt>\n                    ${e.join("")}\n                </tt>\n            </div>\n        `})),a.generated.playAsSE()}return c=!0,await o(1e3),a.sending.playAsSE(),t.style.display="none",m}();await async function(){const e=document.getElementById("evaluatingScreen");e.style.display="block",await o(3e3),e.style.display="none"}();const s=n.map((e=>e.join(""))).join(",");console.log(s),window.location.href=`result.html?result=${s}`}()})()})();